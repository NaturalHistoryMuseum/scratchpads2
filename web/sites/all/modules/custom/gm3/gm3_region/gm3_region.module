<?php

/**
 * Data files are generated by:
 *
 * $ ogrinfo level4.shp level4 > level_4_data
 */
/**
 * Implementation of hook_menu().
 */
function gm3_region_menu(){
  return array(
    'gm3_region/callback/%' => array(
      'title' => 'GM3 Region callback',
      'page callback' => 'gm3_region_get_points',
      'page arguments' => array(
        2
      ),
      'file' => 'gm3_region.callback.inc',
      'access arguments' => array(
        'access content'
      ),
      'type' => MENU_CALLBACK
    ),
    'gm3_region/callback2/%/%/%' => array(
      'title' => 'GM3 Region callback',
      'page callback' => 'gm3_region_get_region_id_from_latlng',
      'page arguments' => array(
        2,
        3,
        4
      ),
      'file' => 'gm3_region.callback.inc',
      'access arguments' => array(
        'access content'
      ),
      'type' => MENU_CALLBACK
    ),
    'gm3_region/callback2/%/%' => array(
      'title' => 'GM3 Region callback2',
      'page callback' => 'gm3_region_get_region_id_from_latlng',
      'page arguments' => array(
        2,
        3
      ),
      'file' => 'gm3_region.callback.inc',
      'access arguments' => array(
        'access content'
      ),
      'type' => MENU_CALLBACK
    )
  );
}

/**
 * Switch database to 'gm3'
 */
function gm3_region_switch_to_gm3_database(){
  global $databases;
  if(isset($databases['gm3'])){
    db_set_active('gm3');
  }
}

/**
 * Implementation of hook_library().
 *
 * FIXME - Select countries.  Click on a region could bring up an option to
 * select the subregions (TDWG 4).
 */
function gm3_region_library(){
  return array(
    // Enable the clicking of countries.
    'region' => array(
      'title' => t('Javascript Maps: Region selection'),
      'js' => array(
        array(
          'data' => drupal_get_path('module', 'gm3_region') . "/js/gm3_region.region.js"
        ),
        array(
          'data' => array(
            'gm3_region' => array(
              'callback' => url('gm3_region/callback'),
              'callback2' => url('gm3_region/callback2')
            )
          ),
          'type' => 'setting'
        )
      ),
      'css' => array(
        array (
          'data' => drupal_get_path('module', 'gm3_region') . "/css/gm3_region.css"
        )
      ),
      'dependencies' => array(
        array(
          'gm3',
          'gm3'
        )
      )
    )
  );
}

/**
 * Implementation of hook_theme().
 */
function gm3_region_theme(){
  return array(
    'gm3_region_button' => array(
      'variables' => array(
        'id' => 'gm3-map'
      ),
      'file' => 'gm3_region.theme.inc'
    ),
    'gm3_region_text' => array(
      'variables' => array(
        'data' => array()
      ),
      'file' => 'gm3_region.theme.inc'
    )
  );
}
