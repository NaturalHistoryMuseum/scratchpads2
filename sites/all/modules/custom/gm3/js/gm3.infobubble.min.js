function InfoBubble(b){this.extend(InfoBubble,google.maps.OverlayView);this.tabs_=[];this.activeTab_=null;this.baseZIndex_=100;this.isOpen_=false;var a=b||{};if(a.backgroundColor==undefined){a.backgroundColor=this.BACKGROUND_COLOR_}if(a.borderColor==undefined){a.borderColor=this.BORDER_COLOR_}if(a.borderRadius==undefined){a.borderRadius=this.BORDER_RADIUS_}if(a.borderWidth==undefined){a.borderWidth=this.BORDER_WIDTH_}if(a.padding==undefined){a.padding=this.PADDING_}if(a.arrowPosition==undefined){a.arrowPosition=this.ARROW_POSITION_}if(a.disableAutoPan==undefined){a.disableAutoPan=false}if(a.disableAnimation==undefined){a.disableAnimation=false}if(a.minWidth==undefined){a.minWidth=this.MIN_WIDTH_}if(a.shadowStyle==undefined){a.shadowStyle=this.SHADOW_STYLE_}if(a.arrowSize==undefined){a.arrowSize=this.ARROW_SIZE_}if(a.arrowStyle==undefined){a.arrowStyle=this.ARROW_STYLE_}this.buildDom_();this.setValues(a)}window.InfoBubble=InfoBubble;InfoBubble.prototype.ARROW_SIZE_=15;InfoBubble.prototype.ARROW_STYLE_=0;InfoBubble.prototype.SHADOW_STYLE_=1;InfoBubble.prototype.MIN_WIDTH_=50;InfoBubble.prototype.ARROW_POSITION_=50;InfoBubble.prototype.PADDING_=10;InfoBubble.prototype.BORDER_WIDTH_=1;InfoBubble.prototype.BORDER_COLOR_="#ccc";InfoBubble.prototype.BORDER_RADIUS_=10;InfoBubble.prototype.BACKGROUND_COLOR_="#fff";InfoBubble.prototype.extend=function(b,a){return(function(c){for(var d in c.prototype){this.prototype[d]=c.prototype[d]}return this}).apply(b,[a])};InfoBubble.prototype.buildDom_=function(){var k=this.bubble_=document.createElement("DIV");k.style.position="absolute";k.style.zIndex=this.baseZIndex_;var b=this.tabsContainer_=document.createElement("DIV");b.style.position="relative";var m=this.close_=document.createElement("IMG");m.style.position="absolute";m.style.width=this.px(12);m.style.height=this.px(12);m.style.border=0;m.style.zIndex=this.baseZIndex_+1;m.style.cursor="pointer";m.src="http://maps.gstatic.com/intl/en_us/mapfiles/iw_close.gif";var h=this;google.maps.event.addDomListener(m,"click",function(){h.close();google.maps.event.trigger(h,"closeclick")});var j=this.contentContainer_=document.createElement("DIV");j.style.overflowX="auto";j.style.overflowY="auto";j.style.cursor="default";j.style.clear="both";j.style.position="relative";var i=this.content_=document.createElement("DIV");j.appendChild(i);var l=this.arrow_=document.createElement("DIV");l.style.position="relative";var c=this.arrowOuter_=document.createElement("DIV");var d=this.arrowInner_=document.createElement("DIV");var f=this.getArrowSize_();c.style.position=d.style.position="absolute";c.style.left=d.style.left="50%";c.style.height=d.style.height="0";c.style.width=d.style.width="0";c.style.marginLeft=this.px(-f);c.style.borderWidth=this.px(f);c.style.borderBottomWidth=0;var e=this.bubbleShadow_=document.createElement("DIV");e.style.position="absolute";k.style.display=e.style.display="none";k.appendChild(this.tabsContainer_);k.appendChild(m);k.appendChild(j);l.appendChild(c);l.appendChild(d);k.appendChild(l);var a=document.createElement("style");a.setAttribute("type","text/css");this.animationName_="_ibani_"+Math.round(Math.random()*10000);var g="."+this.animationName_+"{-webkit-animation-name:"+this.animationName_+";-webkit-animation-duration:0.5s;-webkit-animation-iteration-count:1;}@-webkit-keyframes "+this.animationName_+" {from {-webkit-transform: scale(0)}50% {-webkit-transform: scale(1.2)}90% {-webkit-transform: scale(0.95)}to {-webkit-transform: scale(1)}}";a.textContent=g;document.getElementsByTagName("head")[0].appendChild(a)};InfoBubble.prototype.setBackgroundClassName=function(a){this.set("backgroundClassName",a)};InfoBubble.prototype.setBackgroundClassName=InfoBubble.prototype.setBackgroundClassName;InfoBubble.prototype.backgroundClassName_changed=function(){this.content_.className=this.get("backgroundClassName")};InfoBubble.prototype.backgroundClassName_changed=InfoBubble.prototype.backgroundClassName_changed;InfoBubble.prototype.setTabClassName=function(a){this.set("tabClassName",a)};InfoBubble.prototype.setTabClassName=InfoBubble.prototype.setTabClassName;InfoBubble.prototype.tabClassName_changed=function(){this.updateTabStyles_()};InfoBubble.prototype.tabClassName_changed=InfoBubble.prototype.tabClassName_changed;InfoBubble.prototype.getArrowStyle_=function(){return parseInt(this.get("arrowStyle"),10)||0};InfoBubble.prototype.setArrowStyle=function(a){this.set("arrowStyle",a)};InfoBubble.prototype.setArrowStyle=InfoBubble.prototype.setArrowStyle;InfoBubble.prototype.arrowStyle_changed=function(){this.arrowSize_changed()};InfoBubble.prototype.arrowStyle_changed=InfoBubble.prototype.arrowStyle_changed;InfoBubble.prototype.getArrowSize_=function(){return parseInt(this.get("arrowSize"),10)||0};InfoBubble.prototype.setArrowSize=function(a){this.set("arrowSize",a)};InfoBubble.prototype.setArrowSize=InfoBubble.prototype.setArrowSize;InfoBubble.prototype.arrowSize_changed=function(){this.borderWidth_changed()};InfoBubble.prototype.arrowSize_changed=InfoBubble.prototype.arrowSize_changed;InfoBubble.prototype.setArrowPosition=function(a){this.set("arrowPosition",a)};InfoBubble.prototype.setArrowPosition=InfoBubble.prototype.setArrowPosition;InfoBubble.prototype.getArrowPosition_=function(){return parseInt(this.get("arrowPosition"),10)||0};InfoBubble.prototype.arrowPosition_changed=function(){var a=this.getArrowPosition_();this.arrowOuter_.style.left=this.arrowInner_.style.left=a+"%";this.redraw_()};InfoBubble.prototype.arrowPosition_changed=InfoBubble.prototype.arrowPosition_changed;InfoBubble.prototype.setZIndex=function(a){this.set("zIndex",a)};InfoBubble.prototype.setZIndex=InfoBubble.prototype.setZIndex;InfoBubble.prototype.getZIndex=function(){return parseInt(this.get("zIndex"),10)||this.baseZIndex_};InfoBubble.prototype.zIndex_changed=function(){var a=this.getZIndex();this.bubble_.style.zIndex=this.baseZIndex_=a;this.close_.style.zIndex=a+1};InfoBubble.prototype.zIndex_changed=InfoBubble.prototype.zIndex_changed;InfoBubble.prototype.setShadowStyle=function(a){this.set("shadowStyle",a)};InfoBubble.prototype.setShadowStyle=InfoBubble.prototype.setShadowStyle;InfoBubble.prototype.getShadowStyle_=function(){return parseInt(this.get("shadowStyle"),10)||0};InfoBubble.prototype.shadowStyle_changed=function(){var a=this.getShadowStyle_();var c="";var d="";var b="";switch(a){case 0:c="none";break;case 1:d="40px 15px 10px rgba(33,33,33,0.3)";b="transparent";break;case 2:d="0 0 2px rgba(33,33,33,0.3)";b="rgba(33,33,33,0.35)";break}this.bubbleShadow_.style.boxShadow=this.bubbleShadow_.style.webkitBoxShadow=this.bubbleShadow_.style.MozBoxShadow=d;this.bubbleShadow_.style.backgroundColor=b;if(this.isOpen_){this.bubbleShadow_.style.display=c;this.draw()}};InfoBubble.prototype.shadowStyle_changed=InfoBubble.prototype.shadowStyle_changed;InfoBubble.prototype.showCloseButton=function(){this.set("hideCloseButton",false)};InfoBubble.prototype.showCloseButton=InfoBubble.prototype.showCloseButton;InfoBubble.prototype.hideCloseButton=function(){this.set("hideCloseButton",true)};InfoBubble.prototype.hideCloseButton=InfoBubble.prototype.hideCloseButton;InfoBubble.prototype.hideCloseButton_changed=function(){this.close_.style.display=this.get("hideCloseButton")?"none":""};InfoBubble.prototype.hideCloseButton_changed=InfoBubble.prototype.hideCloseButton_changed;InfoBubble.prototype.setBackgroundColor=function(a){if(a){this.set("backgroundColor",a)}};InfoBubble.prototype.setBackgroundColor=InfoBubble.prototype.setBackgroundColor;InfoBubble.prototype.backgroundColor_changed=function(){var a=this.get("backgroundColor");this.contentContainer_.style.backgroundColor=a;this.arrowInner_.style.borderColor=a+" transparent transparent";this.updateTabStyles_()};InfoBubble.prototype.backgroundColor_changed=InfoBubble.prototype.backgroundColor_changed;InfoBubble.prototype.setBorderColor=function(a){if(a){this.set("borderColor",a)}};InfoBubble.prototype.setBorderColor=InfoBubble.prototype.setBorderColor;InfoBubble.prototype.borderColor_changed=function(){var c=this.get("borderColor");var b=this.contentContainer_;var a=this.arrowOuter_;b.style.borderColor=c;a.style.borderColor=c+" transparent transparent";b.style.borderStyle=a.style.borderStyle=this.arrowInner_.style.borderStyle="solid";this.updateTabStyles_()};InfoBubble.prototype.borderColor_changed=InfoBubble.prototype.borderColor_changed;InfoBubble.prototype.setBorderRadius=function(a){this.set("borderRadius",a)};InfoBubble.prototype.setBorderRadius=InfoBubble.prototype.setBorderRadius;InfoBubble.prototype.getBorderRadius_=function(){return parseInt(this.get("borderRadius"),10)||0};InfoBubble.prototype.borderRadius_changed=function(){var b=this.getBorderRadius_();var a=this.getBorderWidth_();this.contentContainer_.style.borderRadius=this.contentContainer_.style.MozBorderRadius=this.contentContainer_.style.webkitBorderRadius=this.bubbleShadow_.style.borderRadius=this.bubbleShadow_.style.MozBorderRadius=this.bubbleShadow_.style.webkitBorderRadius=this.px(b);this.tabsContainer_.style.paddingLeft=this.tabsContainer_.style.paddingRight=this.px(b+a);this.redraw_()};InfoBubble.prototype.borderRadius_changed=InfoBubble.prototype.borderRadius_changed;InfoBubble.prototype.getBorderWidth_=function(){return parseInt(this.get("borderWidth"),10)||0};InfoBubble.prototype.setBorderWidth=function(a){this.set("borderWidth",a)};InfoBubble.prototype.setBorderWidth=InfoBubble.prototype.setBorderWidth;InfoBubble.prototype.borderWidth_changed=function(){var a=this.getBorderWidth_();this.contentContainer_.style.borderWidth=this.px(a);this.tabsContainer_.style.top=this.px(a);this.updateArrowStyle_();this.updateTabStyles_();this.borderRadius_changed();this.redraw_()};InfoBubble.prototype.borderWidth_changed=InfoBubble.prototype.borderWidth_changed;InfoBubble.prototype.updateArrowStyle_=function(){var c=this.getBorderWidth_();var e=this.getArrowSize_();var b=this.getArrowStyle_();var f=this.px(e);var g=this.px(Math.max(0,e-c));var d=this.arrowOuter_;var a=this.arrowInner_;this.arrow_.style.marginTop=this.px(-c);d.style.borderTopWidth=f;a.style.borderTopWidth=g;if(b==0||b==1){d.style.borderLeftWidth=f;a.style.borderLeftWidth=g}else{d.style.borderLeftWidth=a.style.borderLeftWidth=0}if(b==0||b==2){d.style.borderRightWidth=f;a.style.borderRightWidth=g}else{d.style.borderRightWidth=a.style.borderRightWidth=0}if(b<2){d.style.marginLeft=this.px(-(e));a.style.marginLeft=this.px(-(e-c))}else{d.style.marginLeft=a.style.marginLeft=0}if(c==0){d.style.display="none"}else{d.style.display=""}};InfoBubble.prototype.setPadding=function(a){this.set("padding",a)};InfoBubble.prototype.setPadding=InfoBubble.prototype.setPadding;InfoBubble.prototype.getPadding_=function(){return parseInt(this.get("padding"),10)||0};InfoBubble.prototype.padding_changed=function(){var a=this.getPadding_();this.contentContainer_.style.padding=this.px(a);this.updateTabStyles_();this.redraw_()};InfoBubble.prototype.padding_changed=InfoBubble.prototype.padding_changed;InfoBubble.prototype.px=function(a){if(a){return a+"px"}return a};InfoBubble.prototype.addEvents_=function(){var c=["mousedown","mousemove","mouseover","mouseout","mouseup","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","dblclick","contextmenu","click"];var a=this.bubble_;this.listeners_=[];for(var b=0,d;d=c[b];b++){this.listeners_.push(google.maps.event.addDomListener(a,d,function(f){f.cancelBubble=true;if(f.stopPropagation){f.stopPropagation()}}))}};InfoBubble.prototype.onAdd=function(){if(!this.bubble_){this.buildDom_()}this.addEvents_();var a=this.getPanes();if(a){a.floatPane.appendChild(this.bubble_);a.floatShadow.appendChild(this.bubbleShadow_)}};InfoBubble.prototype.onAdd=InfoBubble.prototype.onAdd;InfoBubble.prototype.draw=function(){var g=this.getProjection();if(!g){return}var b=(this.get("position"));if(!b){this.close();return}var l=0;if(this.activeTab_){l=this.activeTab_.offsetHeight}var j=this.getAnchorHeight_();var f=this.getArrowSize_();var e=this.getArrowPosition_();e=e/100;var i=g.fromLatLngToDivPixel(b);var a=this.contentContainer_.offsetWidth;var k=this.bubble_.offsetHeight;if(!a){return}var h=i.y-(k+f);if(j){h-=j}var c=i.x-(a*e);this.bubble_.style.top=this.px(h);this.bubble_.style.left=this.px(c);var d=parseInt(this.get("shadowStyle"),10);switch(d){case 1:this.bubbleShadow_.style.top=this.px(h+l-1);this.bubbleShadow_.style.left=this.px(c);this.bubbleShadow_.style.width=this.px(a);this.bubbleShadow_.style.height=this.px(this.contentContainer_.offsetHeight-f);break;case 2:a=a*0.8;if(j){this.bubbleShadow_.style.top=this.px(i.y)}else{this.bubbleShadow_.style.top=this.px(i.y+f)}this.bubbleShadow_.style.left=this.px(i.x-a*e);this.bubbleShadow_.style.width=this.px(a);this.bubbleShadow_.style.height=this.px(2);break}};InfoBubble.prototype.draw=InfoBubble.prototype.draw;InfoBubble.prototype.onRemove=function(){if(this.bubble_&&this.bubble_.parentNode){this.bubble_.parentNode.removeChild(this.bubble_)}if(this.bubbleShadow_&&this.bubbleShadow_.parentNode){this.bubbleShadow_.parentNode.removeChild(this.bubbleShadow_)}for(var a=0,b;b=this.listeners_[a];a++){google.maps.event.removeListener(b)}};InfoBubble.prototype.onRemove=InfoBubble.prototype.onRemove;InfoBubble.prototype.isOpen=function(){return this.isOpen_};InfoBubble.prototype.isOpen=InfoBubble.prototype.isOpen;InfoBubble.prototype.close=function(){if(this.bubble_){this.bubble_.style.display="none";this.bubble_.className=this.bubble_.className.replace(this.animationName_,"")}if(this.bubbleShadow_){this.bubbleShadow_.style.display="none";this.bubbleShadow_.className=this.bubbleShadow_.className.replace(this.animationName_,"")}this.isOpen_=false};InfoBubble.prototype.close=InfoBubble.prototype.close;InfoBubble.prototype.open=function(d,a){if(d){this.setMap(d)}if(a){this.set("anchor",a);this.bindTo("anchorPoint",a);this.bindTo("position",a)}this.bubble_.style.display=this.bubbleShadow_.style.display="";var c=!this.get("disableAnimation");if(c){this.bubble_.className+=" "+this.animationName_;this.bubbleShadow_.className+=" "+this.animationName_}this.redraw_();this.isOpen_=true;var e=!this.get("disableAutoPan");if(e){var b=this;window.setTimeout(function(){b.panToView()},200)}};InfoBubble.prototype.open=InfoBubble.prototype.open;InfoBubble.prototype.setPosition=function(a){if(a){this.set("position",a)}};InfoBubble.prototype.setPosition=InfoBubble.prototype.setPosition;InfoBubble.prototype.getPosition=function(){return(this.get("position"))};InfoBubble.prototype.getPosition=InfoBubble.prototype.getPosition;InfoBubble.prototype.position_changed=function(){this.draw()};InfoBubble.prototype.position_changed=InfoBubble.prototype.position_changed;InfoBubble.prototype.panToView=function(){var g=this.getProjection();if(!g){return}if(!this.bubble_){return}var j=this.getAnchorHeight_();var l=this.bubble_.offsetHeight+j;var a=this.get("map");var k=a.getDiv();var h=k.offsetHeight;var d=this.getPosition();var c=g.fromLatLngToContainerPixel(a.getCenter());var i=g.fromLatLngToContainerPixel(d);var f=c.y-l;var m=h-c.y;var b=f<0;var e=0;if(b){f*=-1;e=(f+m)/2}i.y-=e;d=g.fromContainerPixelToLatLng(i);if(a.getCenter()!=d){a.panTo(d)}};InfoBubble.prototype.panToView=InfoBubble.prototype.panToView;InfoBubble.prototype.htmlToDocumentFragment_=function(c){c=c.replace(/^\s*([\S\s]*)\b\s*$/,"$1");var b=document.createElement("DIV");b.innerHTML=c;if(b.childNodes.length==1){return(b.removeChild(b.firstChild))}else{var a=document.createDocumentFragment();while(b.firstChild){a.appendChild(b.firstChild)}return a}};InfoBubble.prototype.removeChildren_=function(a){if(!a){return}var b;while(b=a.firstChild){a.removeChild(b)}};InfoBubble.prototype.setContent=function(a){this.set("content",a)};InfoBubble.prototype.setContent=InfoBubble.prototype.setContent;InfoBubble.prototype.getContent=function(){return(this.get("content"))};InfoBubble.prototype.getContent=InfoBubble.prototype.getContent;InfoBubble.prototype.content_changed=function(){if(!this.content_){return}this.removeChildren_(this.content_);var d=this.getContent();if(d){if(typeof d=="string"){d=this.htmlToDocumentFragment_(d)}this.content_.appendChild(d);var c=this;var a=this.content_.getElementsByTagName("IMG");for(var b=0,e;e=a[b];b++){google.maps.event.addDomListener(e,"load",function(){c.imageLoaded_()})}google.maps.event.trigger(this,"domready")}this.redraw_()};InfoBubble.prototype.content_changed=InfoBubble.prototype.content_changed;InfoBubble.prototype.imageLoaded_=function(){var a=!this.get("disableAutoPan");this.redraw_();if(a&&(this.tabs_.length==0||this.activeTab_.index==0)){this.panToView()}};InfoBubble.prototype.updateTabStyles_=function(){if(this.tabs_&&this.tabs_.length){for(var b=0,c;c=this.tabs_[b];b++){this.setTabStyle_(c.tab)}this.activeTab_.style.zIndex=this.baseZIndex_;var a=this.getBorderWidth_();var d=this.getPadding_()/2;this.activeTab_.style.borderBottomWidth=0;this.activeTab_.style.paddingBottom=this.px(d+a)}};InfoBubble.prototype.setTabStyle_=function(d){var k=this.get("backgroundColor");var f=this.get("borderColor");var e=this.getBorderRadius_();var a=this.getBorderWidth_();var j=this.getPadding_();var g=this.px(-(Math.max(j,e)));var c=this.px(e);var h=this.baseZIndex_;if(d.index){h-=d.index}var l={cssFloat:"left",position:"relative",cursor:"pointer",backgroundColor:k,border:this.px(a)+" solid "+f,padding:this.px(j/2)+" "+this.px(j),marginRight:g,whiteSpace:"nowrap",borderRadiusTopLeft:c,MozBorderRadiusTopleft:c,webkitBorderTopLeftRadius:c,borderRadiusTopRight:c,MozBorderRadiusTopright:c,webkitBorderTopRightRadius:c,zIndex:h,display:"inline"};for(var b in l){d.style[b]=l[b]}var i=this.get("tabClassName");if(i!=undefined){d.className+=" "+i}};InfoBubble.prototype.addTabActions_=function(a){var b=this;a.listener_=google.maps.event.addDomListener(a,"click",function(){b.setTabActive_(this)})};InfoBubble.prototype.setTabActive=function(a){var b=this.tabs_[a-1];if(b){this.setTabActive_(b.tab)}};InfoBubble.prototype.setTabActive=InfoBubble.prototype.setTabActive;InfoBubble.prototype.setTabActive_=function(c){if(!c){this.setContent("");return}var d=this.getPadding_()/2;var b=this.getBorderWidth_();if(this.activeTab_){var a=this.activeTab_;a.style.zIndex=this.baseZIndex_-a.index;a.style.paddingBottom=this.px(d);a.style.borderBottomWidth=this.px(b)}c.style.zIndex=this.baseZIndex_;c.style.borderBottomWidth=0;c.style.marginBottomWidth="-10px";c.style.paddingBottom=this.px(d+b);this.setContent(this.tabs_[c.index].content);this.activeTab_=c;this.redraw_()};InfoBubble.prototype.setMaxWidth=function(a){this.set("maxWidth",a)};InfoBubble.prototype.setMaxWidth=InfoBubble.prototype.setMaxWidth;InfoBubble.prototype.maxWidth_changed=function(){this.redraw_()};InfoBubble.prototype.maxWidth_changed=InfoBubble.prototype.maxWidth_changed;InfoBubble.prototype.setMaxHeight=function(a){this.set("maxHeight",a)};InfoBubble.prototype.setMaxHeight=InfoBubble.prototype.setMaxHeight;InfoBubble.prototype.maxHeight_changed=function(){this.redraw_()};InfoBubble.prototype.maxHeight_changed=InfoBubble.prototype.maxHeight_changed;InfoBubble.prototype.setMinWidth=function(a){this.set("minWidth",a)};InfoBubble.prototype.setMinWidth=InfoBubble.prototype.setMinWidth;InfoBubble.prototype.minWidth_changed=function(){this.redraw_()};InfoBubble.prototype.minWidth_changed=InfoBubble.prototype.minWidth_changed;InfoBubble.prototype.setMinHeight=function(a){this.set("minHeight",a)};InfoBubble.prototype.setMinHeight=InfoBubble.prototype.setMinHeight;InfoBubble.prototype.minHeight_changed=function(){this.redraw_()};InfoBubble.prototype.minHeight_changed=InfoBubble.prototype.minHeight_changed;InfoBubble.prototype.addTab=function(a,c){var b=document.createElement("DIV");b.innerHTML=a;this.setTabStyle_(b);this.addTabActions_(b);this.tabsContainer_.appendChild(b);this.tabs_.push({label:a,content:c,tab:b});b.index=this.tabs_.length-1;b.style.zIndex=this.baseZIndex_-b.index;if(!this.activeTab_){this.setTabActive_(b)}b.className=b.className+" "+this.animationName_;this.redraw_()};InfoBubble.prototype.addTab=InfoBubble.prototype.addTab;InfoBubble.prototype.updateTab=function(a,c,d){if(!this.tabs_.length||a<0||a>=this.tabs_.length){return}var b=this.tabs_[a];if(c!=undefined){b.tab.innerHTML=b.label=c}if(d!=undefined){b.content=d}if(this.activeTab_==b.tab){this.setContent(b.content)}this.redraw_()};InfoBubble.prototype.updateTab=InfoBubble.prototype.updateTab;InfoBubble.prototype.removeTab=function(a){if(!this.tabs_.length||a<0||a>=this.tabs_.length){return}var d=this.tabs_[a];d.tab.parentNode.removeChild(d.tab);google.maps.event.removeListener(d.tab.listener_);this.tabs_.splice(a,1);delete d;for(var c=0,b;b=this.tabs_[c];c++){b.tab.index=c}if(d.tab==this.activeTab_){if(this.tabs_[a]){this.activeTab_=this.tabs_[a].tab}else{if(this.tabs_[a-1]){this.activeTab_=this.tabs_[a-1].tab}else{this.activeTab_=undefined}}this.setTabActive_(this.activeTab_)}this.redraw_()};InfoBubble.prototype.removeTab=InfoBubble.prototype.removeTab;InfoBubble.prototype.getElementSize_=function(b,e,c){var d=document.createElement("DIV");d.style.display="inline";d.style.position="absolute";d.style.visibility="hidden";if(typeof b=="string"){d.innerHTML=b}else{d.appendChild(b.cloneNode(true))}this.map.getDiv().appendChild(d);var a=new google.maps.Size(d.offsetWidth,d.offsetHeight);if(e&&a.width>e){d.style.width=this.px(e);a=new google.maps.Size(d.offsetWidth,d.offsetHeight)}if(c&&a.height>c){d.style.height=this.px(c);a=new google.maps.Size(d.offsetWidth,d.offsetHeight)}this.map.getDiv().removeChild(d);delete d;return a};InfoBubble.prototype.redraw_=function(){this.figureOutSize_();this.positionCloseButton_();this.draw()};InfoBubble.prototype.figureOutSize_=function(){var t=this.get("map");if(!t){return}var f=this.getPadding_();var u=this.getBorderWidth_();var b=this.getBorderRadius_();var j=this.getArrowSize_();var p=t.getDiv();var c=j*2;var r=p.offsetWidth-c;var m=p.offsetHeight-c-this.getAnchorHeight_();var e=0;var n=(this.get("minWidth")||0);var h=(this.get("minHeight")||0);var s=(this.get("maxWidth")||0);var l=(this.get("maxHeight")||0);s=Math.min(r,s);l=Math.min(m,l);var g=0;if(this.tabs_.length){for(var q=0,a;a=this.tabs_[q];q++){var k=this.getElementSize_(a.tab,s,l);var d=this.getElementSize_(a.content,s,l);if(n<k.width){n=k.width}g+=k.width;if(h<k.height){h=k.height}if(k.height>e){e=k.height}if(n<d.width){n=d.width}if(h<d.height){h=d.height}}}else{var o=(this.get("content"));if(typeof o=="string"){o=this.htmlToDocumentFragment_(o)}if(o){var d=this.getElementSize_(o,s,l);if(n<d.width){n=d.width}if(h<d.height){h=d.height}}}if(s){n=Math.min(n,s)}if(l){h=Math.min(h,l)}n=Math.max(n,g);if(n==g){n=n+2*f}j=j*2;n=Math.max(n,j);if(n>r){n=r}if(h>m){h=m-e}if(this.tabsContainer_){this.tabHeight_=e;this.tabsContainer_.style.width=this.px(g)}this.contentContainer_.style.width=this.px(n);this.contentContainer_.style.height=this.px(h)};InfoBubble.prototype.getAnchorHeight_=function(){var a=this.get("anchor");if(a){var b=(this.get("anchorPoint"));if(b){return -1*b.y}}return 0};InfoBubble.prototype.anchorPoint_changed=function(){this.draw()};InfoBubble.prototype.anchorPoint_changed=InfoBubble.prototype.anchorPoint_changed;InfoBubble.prototype.positionCloseButton_=function(){var b=this.getBorderRadius_();var f=this.getBorderWidth_();var a=2;var d=2;if(this.tabs_.length&&this.tabHeight_){d+=this.tabHeight_}d+=f;a+=f;var e=this.contentContainer_;if(e&&e.clientHeight<e.scrollHeight){a+=15}this.close_.style.right=this.px(a);this.close_.style.top=this.px(d)};